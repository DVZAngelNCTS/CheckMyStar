<div class="d-flex flex-column flex-grow-1">
  <!-- Filtres -->
  <div class="d-flex flex-row">
    <div class="d-flex flex-column rounded p-4 flex-grow-1 bg-secondary-light">
      <app-front-folder-filter [loadingSearch]="loadingSearch" [loadingReset]="loadingReset" (filter)="onFilter($event)"></app-front-folder-filter>
    </div>
  </div>

  <!-- Contenu principal extensible -->
  <div class="d-flex flex-column flex-grow-1">
    <!-- Tableau extensible -->
    <div class="d-flex flex-column flex-grow-1">
      <div class="d-flex flex-column rounded p-4 flex-grow-1 overflow-auto bg-secondary-light">
        <app-table [columns]="columns" [data]="tableRows" (detail)="onDetail($event)" (update)="openUpdate($event)" (delete)="openDelete($event)" (enabled)="toggleEnabled($event)" (openCreate)="openCreate()">
        </app-table>
      </div>
    </div>
  </div>
</div>

<app-popup
  [visible]="popupVisible"
  [title]="isDeletingFolder ? ('DossiersSection.Delete' | translate) : isUpdatingFolder ? ('DossiersSection.Update' | translate) : ('DossiersSection.Create' | translate)"
  [confirmLabel]="'PopupSection.Validate' | translate"
  [cancelLabel]="'PopupSection.Cancel' | translate"
  [errorMessage]="popupError"
  [loading]="loading"
  [large]="isCreatingFolder || isUpdatingFolder"
  (confirm)="onPopupConfirm()"
  (cancel)="onPopupCancel()">
  <ng-container *ngIf="isCreatingFolder">
    <app-front-dossier-form [accommodation]="newAccommodation" [folder]="newFolder" [loading]="loading" [lockInspector]="true"></app-front-dossier-form>
  </ng-container>
  <ng-container *ngIf="isUpdatingFolder">
    <app-front-dossier-form [accommodation]="editAccommodation" [folder]="editFolder" [loading]="loading" [lockInspector]="true"></app-front-dossier-form>
  </ng-container>
  <ng-container *ngIf="isDeletingFolder">
    <p>{{ 'DossiersSection.DeleteAsk' | translate }} <strong>#{{ selectedFolderIdentifier }}</strong> ?</p>
  </ng-container>
</app-popup>
