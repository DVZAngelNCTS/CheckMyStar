<div class="d-flex flex-column flex-grow-1">
  <!-- Filtres -->
  <div class="d-flex flex-row">
    <div class="d-flex flex-column rounded p-4 flex-grow-1 bg-secondary-light">
      <app-folder-filter [loadingSearch]="loadingSearch" [loadingReset]="loadingReset" (filter)="onFilter($event)"></app-folder-filter>
    </div>
  </div>

  <!-- Contenu principal extensible -->
  <div class="d-flex flex-column flex-grow-1">
    <!-- Tableau extensible -->
    <div class="d-flex flex-column flex-grow-1">
      <div class="d-flex flex-column rounded p-4 flex-grow-1 overflow-auto bg-secondary-light">
        <app-table [columns]="columns" [data]="folders" (detail)="onDetail($event)" (update)="openUpdate($event)" (delete)="openDelete($event)" (enabled)="toggleEnabled($event)" (openCreate)="openCreate()">
        </app-table>
      </div>
    </div>
  </div>
</div>

<app-popup
  [visible]="popupVisible"
  [title]="popupTitle"
  [confirmLabel]="'PopupSection.Validate' | translate"
  [cancelLabel]="'PopupSection.Cancel' | translate"
  [errorMessage]="popupError"
  [loading]="loading"
  [large]="true"
  (confirm)="onPopupConfirm()"
  (cancel)="onPopupCancel()"
  icon="bi bi-folder2-open">

  <!-- Contenu dynamique -->
  <ng-container *ngIf="popupMode === 'delete'">
    <p>{{ 'DossiersSection.DeleteAsk' | translate }} <strong>{{ selectedFolder?.identifier }}</strong> ?</p>
  </ng-container>

  <ng-container *ngIf="popupVisible">
    <ng-container *ngIf="popupMode === 'edit'">
      <app-dossier-form [folder]="selectedFolder" [readonlyIdentifier]="true"></app-dossier-form>
    </ng-container>
    <ng-container *ngIf="popupMode === 'create'">
      <app-dossier-form [readonlyIdentifier]="true"></app-dossier-form>
    </ng-container>
  </ng-container>
</app-popup>
